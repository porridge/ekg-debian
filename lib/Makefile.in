# $Id$

INCLUDES = -I.. @CURSES_INCLUDEDIR@ @READLINE_INCLUDES@
LIBS = @LIBS@ @CURSES_LIBS@ @READLINE_LIBS@
CC = @CC@ 
prefix = @prefix@
datadir = @datadir@
mandir = @mandir@
NAME = libgg
VERSION = 0.90
RM = @RM@
MAKE = @MAKE@
AR = @AR@
install = @INSTALL@

CFLAGS = @DFLAGS@ @CFLAGS@ $(INCLUDES) -fPIC
OBJS = common.o libgg.o search.o pubdir.o http.o dcc.o

SHARED = libgg.so.0.9.0
STATIC = libgg.a

all:	static shared

distclean:	clean
	$(RM) -f *~ Makefile

clean:
	$(RM) -f *.o libgg.so* libgg.a

shared:	$(SHARED)

$(SHARED):	$(OBJS)
#	$(CC) $(CFLAGS) -fPIC -c libgg.c -o libgg.o
#	$(CC) $(CFLAGS) -fPIC -c search.c -o search.o
#	$(CC) $(CFLAGS) -fPIC -c common.c -o common.o
	$(CC) -g -shared -Wl,-soname,libgg.so -o $(SHARED) $(OBJS) -lc

static: $(STATIC)

libgg.a:	$(OBJS)
	$(AR) r $(STATIC) $(OBJS) 
