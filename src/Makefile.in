# $Id$

prefix = @prefix@
datadir = @datadir@
mandir = @mandir@
exec_prefix = @exec_prefix@
bindir = @bindir@

CC = @CC@ 
CFLAGS = @CFLAGS@ -I.. -I../lib -DTHEMES_DIR=\"$(datadir)/ekg/themes\" -Wall
LIBS = @LIBS@

MAKE = @MAKE@
AR = @AR@
INSTALL = @INSTALL@

OBJS = stuff.o commands.o events.o themes.o vars.o dynstuff.o userlist.o voice.o ekg.o xmalloc.o @ui_readline_o@ @ui_ncurses_o@ ui-batch.o ui-none.o @libgadu_a@

#

all:	ekg @ioctld@

ekg:	$(OBJS)
	$(CC) $(CFLAGS) -o ekg $(OBJS) -L../lib $(LIBS) @lgadu@

ioctld:	ioctld.c
	$(CC) $(CFLAGS) ioctld.c -o ioctld

#

install: all install-ekg @install_ioctld@

install-ekg:
	$(INSTALL) -d $(DESTDIR)$(bindir)
	$(INSTALL) -m 755 ekg $(DESTDIR)$(bindir)

install-ioctld:
	$(INSTALL) -d $(DESTDIR)$(bindir)
	$(INSTALL) -m 4755 ioctld $(DESTDIR)$(bindir)

#

clean:
	rm -f *.o ekg ioctld search core 

distclean:	clean
	rm -f *~ Makefile


