# $Id$

prefix = @prefix@
datadir = @datadir@
mandir = @mandir@
exec_prefix = @exec_prefix@
bindir = @bindir@
libexecdir = @libexecdir@

CC = @CC@ 
CFLAGS = -I.. -I../lib @CFLAGS@ -Wall -DTHEMES_DIR=\"${datadir}/ekg/themes\"
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@

MAKE = @MAKE@
AR = @AR@
INSTALL = @INSTALL@
STRIP = @STRIP@

OBJS = stuff.o commands.o events.o themes.o vars.o dynstuff.o userlist.o ekg.o xmalloc.o msgqueue.c @OBJS@ ui-batch.o ui-none.o ui-automaton.o

#

all:	ekg @ioctld@

ekg:	$(OBJS)
	$(CC) $(CFLAGS) -o ekg $(OBJS) -L../lib $(LDFLAGS) $(LIBS) @lgadu@

ioctld:	ioctld.c
	$(CC) $(CFLAGS) ioctld.c -o ioctld $(LIBS)

#

install: all install-ekg @install_ioctld@

install-ekg:	@strip_ekg@
	$(INSTALL) -d $(DESTDIR)$(bindir)
	$(INSTALL) -m 755 ekg $(DESTDIR)$(bindir)

install-ioctld:	@strip_ioctld@
	$(INSTALL) -d $(DESTDIR)$(libexecdir)
	$(INSTALL) -m 755 ioctld $(DESTDIR)$(libexecdir)

strip-ekg:
	$(STRIP) ekg

strip-ioctld:
	$(STRIP) ioctld

#

clean:
	rm -f *.o ekg ioctld search core 

distclean:	clean
	rm -f *~ Makefile


