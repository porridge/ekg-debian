# $Id$

prefix = $(DESTDIR)@prefix@
datadir = @datadir@
mandir = @mandir@
exec_prefix = @exec_prefix@
bindir = @bindir@

MAKE = @MAKE@
INSTALL = @INSTALL@

#

all:	libgadu @ekg@

libgadu:
	cd lib && $(MAKE) all

ekg:	
	cd src && $(MAKE) all

examples:
	cd examples && $(MAKE) all

#

install:	all install-libgadu @install_ekg@

install-libgadu:
	cd lib && $(MAKE) install

install-ekg:	install-ekg-themes install-ekg-man install-ekgsearch
	cd src && $(MAKE) install

install-ekg-themes:
	$(INSTALL) -d $(datadir)/ekg/themes
	$(INSTALL) -m 644 themes/*.theme $(datadir)/ekg/themes

install-ekg-man:
	$(INSTALL) -d $(mandir)/man1
	$(INSTALL) -m 644 docs/ekg.man.en $(mandir)/man1/ekg.1
	$(INSTALL) -d $(mandir)/pl/man1
	$(INSTALL) -m 644 docs/ekg.man.pl $(mandir)/pl/man1/ekg.1

install-ekgsearch:
	$(INSTALL) -d $(bindir)
	$(INSTALL) -m 755 contrib/ekgsearch $(bindir)

#

clean:	clean-libgadu @clean_ekg@ clean-examples

clean-libgadu:
	cd lib && $(MAKE) clean

clean-ekg:
	cd src && $(MAKE) clean

clean-examples:
	cd examples && $(MAKE) clean

#

distclean:	distclean-libgadu @distclean_ekg@ distclean-examples
	rm -f *~ config.log config.cache config.status config.h Makefile

distclean-libgadu:
	cd lib && $(MAKE) distclean

distclean-ekg:
	cd src && $(MAKE) distclean

distclean-examples:
	cd examples && $(MAKE) distclean


