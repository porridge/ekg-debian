# $Id$

INCLUDES = @CURSES_INCLUDEDIR@ @READLINE_INCLUDES@
LIBS = @LIBS@ @CURSES_LIBS@ @READLINE_LIBS@
CC = @CC@ 
prefix = @prefix@
datadir = @datadir@
mandir = @mandir@
NAME = ekg
VERSION = 0.90
RM = @RM@
MAKE = @MAKE@
AR = @AR@
install = @INSTALL@

CFLAGS = @DFLAGS@ @CFLAGS@ $(INCLUDES) -DTHEMES_DIR=\"$(datadir)/ekg/themes\" -DIOCTL_DAEMON_PATH=\"$(prefix)/bin/ioctl_daemon\"
OBJS = stuff.o commands.o events.o themes.o vars.o dynstuff.o
LOBJS = libgg.o libgg_search.o

all:	libgg ekg

ekg:	
	(cd src; $(MAKE) all)

libgg:	
	(cd lib; $(MAKE) all)

install: ekg
	$(install) -m 755 src/ekg $(prefix)/bin
	$(install) -m 755 docs/ekl.pl $(prefix)/bin
	@$(install) -d $(datadir)/ekg/themes/
	$(install) -m 644 themes/*.theme $(datadir)/ekg/themes
	@$(install) -d $(mandir)/man1
	$(install) -m 644 docs/ekg.man.en $(mandir)/man1/ekg.1
	$(install) -m 4755 src/ioctl_daemon $(prefix)/bin

distclean:	clean
	$(RM) -f *~ config.log config.cache config.status config.h Makefile
	(cd lib; $(MAKE) distclean)
	(cd src; $(MAKE) distclean)
	(cd examples; $(MAKE) distclean)

clean:
	(cd lib; $(MAKE) clean)
	(cd src; $(MAKE) clean)
	(cd examples; $(MAKE) clean) 
