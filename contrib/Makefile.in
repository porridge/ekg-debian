# $Id$

INCLUDES = @includes@
LIBS = @libs@
CC = @cc@
PREFIX = @prefix@
NAME = @name@
VERSION = @version@

CFLAGS = -Wall -O3 -ggdb @cflags@ $(INCLUDES)
OBJS = libgg.o libgg_search.o stuff.o commands.o events.o themes.o vars.o dynstuff.o

all:	ekg

ekg:	$(OBJS) ekg.c
	$(CC) $(CFLAGS) ekg.c -o $(NAME) $(OBJS) $(LIBS)

install: ekg
	install ekg $(PREFIX)/bin

clean:
	rm -f *.o ekg search core libgg.so* *~

distclean:	clean
	rm -f Makefile endian.h

snapshot:	distclean
	./snapshot.sh

push:
	./push.sh

checkin:
	for i in `grep '$$Id' * docs/* examples/* | cut -d: -f1 | sort -u`; do ci -l -mplumk $$i; done

shared:
	$(CC) -fPIC -g -c libgg.c -o libgg.o
	$(CC) -fPIC -g -c libgg_search.c -o libgg_search.o
	$(CC) -g -shared -Wl,-soname,libgg.so -o libgg.so.0.9.0 libgg.o libgg_search.o -lc

